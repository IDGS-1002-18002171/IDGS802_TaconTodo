{% extends "layout1.html" %}

{% block content1 %}
  <div class="container mt-5">
    <h1 class="text-center">Carrito de compras</h1>
    <hr>
    {% if items %}
      <table class="table">
        <thead>
          <tr>
            <th scope="col">Producto</th>
            <th scope="col">Precio</th>
            <th scope="col">Cantidad Solicitada</th>
            <th scope="col">Detalles de la orden</th>
            <th scope="col"></th>
          </tr>
        </thead>
        <tbody>
          {% for item in items %}
            <tr>
              <td>{{ item.nombre }}</td>
              <td>{{ item.precio_venta }}</td>
              <td>{{ item.cantidad_disponible }}</td>
              <td>{{ item.descripcion }}</td>
              <td>
                <form action="/eliminar_al_carrito" method="POST">
                  <input type="hidden" name="csrf_token" value="{{ csrf_token }}">
                  <input type="hidden" id="id" name="id" value="{{ item.id_producto }}">
                  <button type="submit" class="btn btn-danger">Eliminar</button>
                </form>
              </td>
            </tr>
          {% endfor %}
        </tbody>
      </table>
      <h1>Total :${{total}}</h1>
      <div class="row">
        <div class="col-md-6">
            <form action="{{ url_for('venta.getproduct') }}">
                <button type="submit" class="btn btn-outline-danger offset-1">Regresar</button>
            </form>
        </div>
        <div class="col-md-6">
            <form action="{{ url_for('venta.pasarela') }}">
                <button type="submit" class="btn btn-outline-info">Realizar Compra</button>
            </form>
        </div>
      </div>
    {% else %}
      <p>No hay productos en el carrito.</p>
      <div class="col-md-6">
        <form action="{{ url_for('venta.getproduct') }}">
            <button type="submit" class="btn btn-outline-info">Regresar</button>
        </form>
    </div>
    {% endif %}
  </div>
{% endblock %}